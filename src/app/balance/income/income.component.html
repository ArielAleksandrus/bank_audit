<table id="incomeTable" class="table table-hover table-striped">
	<thead>
		<tr class="title">
			<th colspan="6">
				RECEITAS <i>({{incomes().length}})</i> &nbsp;&nbsp;
				<button class="btn btn-sm btn-primary"  [class.btn-warning]="!collapsed" (click)="collapsed = !collapsed">
					{{collapsed ? "EXPANDIR" : "RECOLHER"}}
				</button> &nbsp; &nbsp;
				<button class="btn btn-sm btn-info" (click)="filtering = !filtering">FILTRAR</button>
			</th>
		</tr>
		<tr #collapse="ngbCollapse" [(ngbCollapse)]="collapsed">
			<th>BANCO</th>
			<th>DATA</th>
			<th>TIPO</th>
			<th>ORIGEM</th>
			<th>VALOR</th>
			<th *ngIf="!printMode">&nbsp;</th>
		</tr>
		<tr *ngIf="filtering" #collapse="ngbCollapse" [(ngbCollapse)]="collapsed">
			<td>
				<ng-select [items]="availableBanks" [(ngModel)]="filters.bank_names" multiple="true"
				(change)="changeFilter('bank_names', $event)"></ng-select>
			</td>
			<td></td>
			<td>
				<ng-select [items]="availableIncomeTypes" [(ngModel)]="filters.income_types" multiple="true"
				(change)="changeFilter('income_types', $event)"></ng-select>
			</td>
		</tr>
	</thead>
	<tbody #collapse="ngbCollapse" [(ngbCollapse)]="collapsed">
		<tr *ngFor="let income of incomes()" [class.danger]="income.auxStatus == 'error'" [class.hidden]="income.hidden">
			<td>{{income.bank_name}}</td>
			<td>{{income.date_received | date:'dd/MM/YYYY'}}</td>
			<td>
				<select *ngIf="!printMode" class="form-control" [(ngModel)]="income.income_type">
					<option value="cartao">Cartão</option>
					<option value="cheque">Cheque</option>
					<option value="deposito">Depósito</option>
					<option value="pix">Pix</option>
					<option value="outros">Outros</option>
				</select>
				<span *ngIf="printMode">{{income.income_type}}</span>
			</td>
			<td>
				<input *ngIf="!printMode" type="text" class="form-control" [(ngModel)]="income.origin"/>
				<span *ngIf="printMode">{{income.origin}}</span>
			</td>
			<td>
				<input *ngIf="!printMode" type="text" class="form-control" mask="separator.2" [(ngModel)]="income.value"/>
				<span *ngIf="printMode">{{income.value | currency:'BRL'}}</span>
			</td>
			<td *ngIf="!printMode"><button class="btn btn-sm btn-danger" (click)="remove(income)">x</button></td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td></td>
			<td></td>
			<td></td>
			<td>Total:</td>
			<td>{{total | currency:'BRL'}}</td>
			<td></td>
		</tr>
	</tfoot>
</table>
<div *ngIf="canSave" class="send-container">
	<button class="btn btn-lg btn-primary" (click)="save()" [disabled]="sending">
		Enviar
	</button> <i *ngIf="sending">Enviando... por favor aguarde</i>
	&nbsp; &nbsp; &nbsp;
	<button class="btn btn-lg btn-warning" (click)="export()" [disabled]="sending || incomes().length == 0">
		Exportar
	</button>
</div>